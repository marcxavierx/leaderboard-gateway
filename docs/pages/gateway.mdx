---
title: API Gateway
description: API specifics and deep dive
navigation_icon: glasses
category: Documentation
---

# Leaderboard API Gateway Documentation

## Overview

This API gateway provides secure, sanitized access to casino leaderboard data. It acts as a protective proxy that exposes only non-sensitive information (usernames and wager amounts) while keeping your casino API completely private.

## Endpoint

### GET /leaderboard

Retrieves sanitized leaderboard data.

**Authentication:** API Key required (Bearer token)

**Request:**
```bash
curl -H "Authorization: Bearer YOUR_API_KEY" \
  https://your-gateway.zuplo.app/leaderboard
```

**Response:**
```json
[
  {
    "username": "Player1",
    "wager": 1200
  },
  {
    "username": "Player2",
    "wager": 950
  }
]
```

## Security

### API Key Authentication
All requests require a valid API key. Requests without a valid key will receive a `401 Unauthorized` response.

### Data Sanitization
The gateway automatically sanitizes all responses from your casino API:

-  **Exposed:** Player usernames and wager amounts only
- = **Protected:** All other data (emails, balances, IDs, tokens, etc.) is removed

### How It Works

1. Client requests data from the gateway (with API key)
2. Gateway authenticates the request using API key validation
3. Gateway forwards the request to your casino API with session cookie authentication
4. Gateway receives the full response from your casino API
5. Gateway sanitizes the response, keeping only username and wager fields
6. Client receives only safe, public data

Your casino API URL, session cookie, and all sensitive data remain private in your environment variables.

## Configuration

### Environment Variables

Set the following in your Zuplo environment:

- `CASINO_URL` - Your casino API leaderboard endpoint URL
- `CASINO_COOKIE` - Your casino API session cookie for authentication (e.g., `session_id=abc123; token=xyz789`)

### API Keys

Create and manage API keys in the Zuplo dashboard under Services ï¿½ API Key Manager.

## Intelligent Field Mapping

The gateway uses pattern matching to work with different API response structures:

- **Username fields:** Matches `username`, `user`, `player`, or `name`
- **Wager fields:** Matches `wager`, `wager_total`, `value`, `amount`, or `bet` (supports both primitive values and nested objects)

This ensures compatibility even if your casino API structure changes.

## Error Responses

- `401 Unauthorized` - Missing or invalid API key
- `500 Internal Server Error` - Issue connecting to casino API or processing response

## Rate Limiting

API key validation results are cached for 60 seconds to improve performance.
